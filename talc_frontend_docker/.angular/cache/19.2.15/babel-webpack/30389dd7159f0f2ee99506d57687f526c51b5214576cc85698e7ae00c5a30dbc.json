{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { navItems } from '../sidebar/sidebar-data';\nimport { TablerIconsModule } from 'angular-tabler-icons';\nimport { MaterialModule } from 'src/app/material.module';\nimport { RouterModule, NavigationEnd } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { NgScrollbarModule } from 'ngx-scrollbar';\nimport { NotificacionesDialogComponent } from 'src/app/shared/notificaciones-dialog.component';\nimport { filter } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/core.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@ngx-translate/core\";\nimport * as i4 from \"src/app/services/notificaciones.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"angular-tabler-icons/lib/tabler-icon.component\";\nimport * as i8 from \"@angular/material/menu\";\nimport * as i9 from \"@angular/material/toolbar\";\nimport * as i10 from \"@angular/material/button\";\nimport * as i11 from \"@angular/material/badge\";\nimport * as i12 from \"@angular/material/tooltip\";\nimport * as i13 from \"@angular/material/form-field\";\nimport * as i14 from \"@angular/material/input\";\nimport * as i15 from \"@angular/material/divider\";\nimport * as i16 from \"@angular/forms\";\nconst _c0 = () => [\"/turnos/reportes\"];\nconst _c1 = () => [\"/turnos/calendario\"];\nconst _forTrack0 = ($index, $item) => $item.title;\nfunction HeaderComponent_Conditional_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_Conditional_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.toggleCollapsed.emit());\n    });\n    i0.ɵɵelement(1, \"i-tabler\", 27);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HeaderComponent_Conditional_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_Conditional_2_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.toggleMobileNav.emit());\n    });\n    i0.ɵɵelement(1, \"i-tabler\", 27);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HeaderComponent_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 28);\n    i0.ɵɵelement(1, \"i-tabler\", 29);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\nfunction HeaderComponent_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 30);\n    i0.ɵɵelement(1, \"i-tabler\", 31);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c1));\n  }\n}\nfunction HeaderComponent_Conditional_7_Template(rf, ctx) {}\nfunction HeaderComponent_For_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 19)(1, \"div\", 32);\n    i0.ɵɵelement(2, \"img\", 33);\n    i0.ɵɵelementStart(3, \"div\", 34)(4, \"h5\", 35);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const notification_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", notification_r5.img, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", notification_r5.title, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(notification_r5.subtitle);\n  }\n}\nconst _c2 = a0 => [a0];\nconst _forTrack1 = ($index, $item) => $item.displayName;\nfunction AppSearchDialogComponent_For_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 10)(1, \"h5\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 12);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c2, item_r1.route));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r1.displayName, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.route);\n  }\n}\nexport let HeaderComponent = /*#__PURE__*/(() => {\n  class HeaderComponent {\n    constructor(settings, vsidenav, dialog, translate, notificacionesService, router) {\n      this.settings = settings;\n      this.vsidenav = vsidenav;\n      this.dialog = dialog;\n      this.translate = translate;\n      this.notificacionesService = notificacionesService;\n      this.router = router;\n      this.showToggle = true;\n      this.toggleChecked = false;\n      this.toggleMobileNav = new EventEmitter();\n      this.toggleMobileFilterNav = new EventEmitter();\n      this.toggleCollapsed = new EventEmitter();\n      this.showFiller = false;\n      this.optionsChange = new EventEmitter();\n      this.notificaciones = [];\n      this.cantidadNoLeidas = 0;\n      this.isTurnosRoute = false;\n      this.options = this.settings.getOptions();\n      this.nombreCompleto = localStorage.getItem('nombreCompleto') || '';\n      this.rol = localStorage.getItem('rol') || '';\n      this.email = localStorage.getItem('email') || '';\n      this.notifications = [{\n        id: 1,\n        img: '/assets/images/profile/user-1.jpg',\n        title: 'Roman Joined the Team!',\n        subtitle: 'Congratulate him sf'\n      }, {\n        id: 2,\n        img: '/assets/images/profile/user-2.jpg',\n        title: 'New message received',\n        subtitle: 'Salma sent you new message'\n      }, {\n        id: 3,\n        img: '/assets/images/profile/user-3.jpg',\n        title: 'New Payment received',\n        subtitle: 'Check your earnings'\n      }, {\n        id: 4,\n        img: '/assets/images/profile/user-4.jpg',\n        title: 'Jolly completed tasks',\n        subtitle: 'Assign her new tasks'\n      }, {\n        id: 5,\n        img: '/assets/images/profile/user-5.jpg',\n        title: 'Roman Joined thed Team!',\n        subtitle: 'Congratulate him'\n      }];\n      this.cargarNotificaciones();\n    }\n    ngOnInit() {\n      this.checkTurnosRoute();\n      this.router.events.pipe(filter(e => e instanceof NavigationEnd)).subscribe(() => {\n        this.checkTurnosRoute();\n      });\n    }\n    openDialog() {\n      const dialogRef = this.dialog.open(AppSearchDialogComponent);\n      dialogRef.afterClosed().subscribe(result => {\n        console.log(`Dialog result: ${result}`);\n      });\n    }\n    setlightDark(theme) {\n      this.options.theme = theme;\n      this.emitOptions();\n    }\n    emitOptions() {\n      this.optionsChange.emit(this.options);\n    }\n    openChangePasswordDialog() {\n      // Lógica para abrir el diálogo de cambio de contraseña\n      // Puedes reutilizar el método que ya abre el dialog en el login\n      // Por ejemplo:\n      // this.dialog.open(ChangePasswordDialogComponent, { width: '400px', disableClose: true });\n    }\n    logout() {\n      localStorage.clear();\n      window.location.href = '/authentication/login';\n    }\n    cargarNotificaciones() {\n      this.notificacionesService.obtenerNotificaciones().subscribe(notis => {\n        // Filtrar solo no leídas\n        this.notificaciones = notis.filter(n => !n.Leido);\n        this.cantidadNoLeidas = this.notificaciones.length;\n      });\n    }\n    abrirNotificaciones() {\n      const dialogRef = this.dialog.open(NotificacionesDialogComponent, {\n        data: {\n          notificaciones: this.notificaciones\n        },\n        width: '400px',\n        disableClose: false\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        // Al cerrar el diálogo, recargar notificaciones para actualizar el badge\n        this.cargarNotificaciones();\n      });\n    }\n    checkTurnosRoute() {\n      this.isTurnosRoute = this.router.url.includes('/turnos');\n    }\n    static {\n      this.ɵfac = function HeaderComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || HeaderComponent)(i0.ɵɵdirectiveInject(i1.CoreService), i0.ɵɵdirectiveInject(i1.CoreService), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.TranslateService), i0.ɵɵdirectiveInject(i4.NotificacionesService), i0.ɵɵdirectiveInject(i5.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: HeaderComponent,\n        selectors: [[\"app-header\"]],\n        inputs: {\n          showToggle: \"showToggle\",\n          toggleChecked: \"toggleChecked\"\n        },\n        outputs: {\n          toggleMobileNav: \"toggleMobileNav\",\n          toggleMobileFilterNav: \"toggleMobileFilterNav\",\n          toggleCollapsed: \"toggleCollapsed\",\n          optionsChange: \"optionsChange\"\n        },\n        decls: 37,\n        vars: 7,\n        consts: [[\"notificationmenu\", \"matMenu\"], [\"profilemenu\", \"matMenu\"], [1, \"topbar\", \"gap-10\"], [\"mat-icon-button\", \"\", 1, \"d-flex\", \"justify-content-center\"], [\"mat-icon-button\", \"\", 1, \"d-flex\", \"justify-content-center\", 3, \"click\"], [\"name\", \"search\", 1, \"icon-20\", \"d-flex\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Ver reportes de turnos\", \"class\", \"d-flex justify-content-center\", \"style\", \"margin-left: 4px;\", 3, \"routerLink\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Ver calendario de turnos\", \"class\", \"d-flex justify-content-center\", \"style\", \"margin-left: 4px;\", 3, \"routerLink\", 4, \"ngIf\"], [1, \"d-none\", \"d-lg-flex\"], [1, \"flex-1-auto\"], [\"mat-icon-button\", \"\", 1, \"d-flex\", \"d-lg-none\", \"justify-content-center\", 3, \"click\"], [\"name\", \"grid-dots\", 1, \"icon-20\", \"d-flex\"], [\"mat-icon-button\", \"\", \"aria-label\", \"Notificaciones\", 3, \"click\"], [\"name\", \"bell\", \"matBadgeColor\", \"warn\", 1, \"d-flex\", 3, \"matBadge\"], [1, \"topbar-dd\", \"cardWithShadow\"], [1, \"d-flex\", \"align-items-center\", \"p-x-32\", \"p-y-16\"], [1, \"f-s-16\", \"f-w-600\", \"m-0\"], [1, \"m-l-auto\"], [1, \"bg-primary\", \"text-white\", \"p-x-8\", \"p-y-4\", \"f-w-500\", \"rounded\", \"f-s-12\"], [\"mat-menu-item\", \"\", 1, \"p-x-32\", \"p-y-16\"], [1, \"p-y-12\", \"p-x-32\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", 1, \"w-100\"], [\"mat-icon-button\", \"\", \"aria-label\", \"Notifications\", 3, \"matMenuTriggerFor\"], [\"src\", \"/assets/images/profile/user-2.jpg\", \"width\", \"35\", 1, \"rounded-circle\", \"object-cover\", \"icon-35\", \"profile-dd\"], [\"mat-menu-item\", \"\", 3, \"click\"], [\"name\", \"lock\", 1, \"icon-20\", \"m-r-8\"], [\"name\", \"logout\", 1, \"icon-20\", \"m-r-8\"], [\"name\", \"menu-2\", 1, \"icon-20\", \"d-flex\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Ver reportes de turnos\", 1, \"d-flex\", \"justify-content-center\", 2, \"margin-left\", \"4px\", 3, \"routerLink\"], [\"name\", \"chart-bar\", 1, \"icon-20\", \"d-flex\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Ver calendario de turnos\", 1, \"d-flex\", \"justify-content-center\", 2, \"margin-left\", \"4px\", 3, \"routerLink\"], [\"name\", \"calendar-event\", 1, \"icon-20\", \"d-flex\"], [1, \"d-flex\", \"align-items-center\"], [\"width\", \"48\", 1, \"rounded-circle\", 3, \"src\"], [1, \"m-l-16\"], [1, \"f-s-14\", \"f-w-600\", \"m-0\"]],\n        template: function HeaderComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"mat-toolbar\", 2);\n            i0.ɵɵtemplate(1, HeaderComponent_Conditional_1_Template, 2, 0, \"button\", 3)(2, HeaderComponent_Conditional_2_Template, 2, 0, \"button\", 3);\n            i0.ɵɵelementStart(3, \"button\", 4);\n            i0.ɵɵlistener(\"click\", function HeaderComponent_Template_button_click_3_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.openDialog());\n            });\n            i0.ɵɵelement(4, \"i-tabler\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(5, HeaderComponent_button_5_Template, 2, 2, \"button\", 6)(6, HeaderComponent_button_6_Template, 2, 2, \"button\", 7)(7, HeaderComponent_Conditional_7_Template, 0, 0);\n            i0.ɵɵelement(8, \"div\", 8)(9, \"span\", 9);\n            i0.ɵɵelementStart(10, \"button\", 10);\n            i0.ɵɵlistener(\"click\", function HeaderComponent_Template_button_click_10_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.toggleMobileFilterNav.emit());\n            });\n            i0.ɵɵelement(11, \"i-tabler\", 11);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"button\", 12);\n            i0.ɵɵlistener(\"click\", function HeaderComponent_Template_button_click_12_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.abrirNotificaciones());\n            });\n            i0.ɵɵelement(13, \"i-tabler\", 13);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"mat-menu\", 14, 0)(16, \"div\", 15)(17, \"h6\", 16);\n            i0.ɵɵtext(18, \"Notifications\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"span\", 17)(20, \"span\", 18);\n            i0.ɵɵtext(21, \"5 new\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵrepeaterCreate(22, HeaderComponent_For_23_Template, 8, 3, \"button\", 19, _forTrack0);\n            i0.ɵɵelementStart(24, \"div\", 20)(25, \"button\", 21);\n            i0.ɵɵtext(26, \" See all notifications \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(27, \"button\", 22);\n            i0.ɵɵelement(28, \"img\", 23);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(29, \"mat-menu\", 14, 1)(31, \"button\", 24);\n            i0.ɵɵlistener(\"click\", function HeaderComponent_Template_button_click_31_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.openChangePasswordDialog());\n            });\n            i0.ɵɵelement(32, \"i-tabler\", 25);\n            i0.ɵɵtext(33, \" Cambiar contrase\\u00F1a \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(34, \"button\", 24);\n            i0.ɵɵlistener(\"click\", function HeaderComponent_Template_button_click_34_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.logout());\n            });\n            i0.ɵɵelement(35, \"i-tabler\", 26);\n            i0.ɵɵtext(36, \" Cerrar sesi\\u00F3n \");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            const profilemenu_r6 = i0.ɵɵreference(30);\n            i0.ɵɵadvance();\n            i0.ɵɵconditional(ctx.showToggle ? 1 : -1);\n            i0.ɵɵadvance();\n            i0.ɵɵconditional(!ctx.showToggle ? 2 : -1);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.isTurnosRoute);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isTurnosRoute);\n            i0.ɵɵadvance();\n            i0.ɵɵconditional(ctx.isTurnosRoute ? 7 : -1);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"matBadge\", ctx.cantidadNoLeidas > 0 ? ctx.cantidadNoLeidas : null);\n            i0.ɵɵadvance(9);\n            i0.ɵɵrepeater(ctx.notifications);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"matMenuTriggerFor\", profilemenu_r6);\n          }\n        },\n        dependencies: [RouterModule, i5.RouterLink, CommonModule, i6.NgIf, NgScrollbarModule, TablerIconsModule, i7.TablerIconComponent, MaterialModule, i8.MatMenu, i8.MatMenuItem, i8.MatMenuTrigger, i9.MatToolbar, i10.MatButton, i10.MatIconButton, i11.MatBadge, i12.MatTooltip],\n        encapsulation: 2\n      });\n    }\n  }\n  return HeaderComponent;\n})();\nexport let AppSearchDialogComponent = /*#__PURE__*/(() => {\n  class AppSearchDialogComponent {\n    constructor() {\n      this.searchText = '';\n      this.navItems = navItems;\n      this.navItemsData = navItems.filter(navitem => navitem.displayName);\n    }\n    static {\n      this.ɵfac = function AppSearchDialogComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AppSearchDialogComponent)();\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AppSearchDialogComponent,\n        selectors: [[\"search-dialog\"]],\n        decls: 14,\n        vars: 1,\n        consts: [[1, \"p-24\", \"p-b-0\"], [1, \"row\"], [1, \"col-10\"], [\"appearance\", \"outline\", \"color\", \"primary\", 1, \"hide-hint\", \"w-100\"], [\"matInput\", \"\", \"placeholder\", \"Search here\", 3, \"ngModelChange\", \"ngModel\"], [1, \"col-2\", \"d-flex\", \"justify-content-end\"], [\"mat-icon-button\", \"\", \"mat-dialog-close\", \"\", 1, \"d-flex\", \"justify-content-center\"], [\"name\", \"x\", 1, \"icon-18\", \"d-flex\"], [1, \"mat-typography\", \"search-dialog\"], [1, \"f-s-18\", \"f-w-600\", \"m-b-16\"], [\"mat-dialog-close\", \"\", 1, \"p-y-12\", \"text-decoration-none\", \"d-block\", 3, \"routerLink\"], [1, \"f-s-14\", \"f-w-500\", \"d-block\", \"m-0\"], [1, \"f-s-12\"]],\n        template: function AppSearchDialogComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"mat-form-field\", 3)(4, \"input\", 4);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function AppSearchDialogComponent_Template_input_ngModelChange_4_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.searchText, $event) || (ctx.searchText = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(5, \"div\", 5)(6, \"button\", 6);\n            i0.ɵɵelement(7, \"i-tabler\", 7);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelement(8, \"mat-divider\");\n            i0.ɵɵelementStart(9, \"mat-dialog-content\", 8)(10, \"h4\", 9);\n            i0.ɵɵtext(11, \"Quick Page Links\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵrepeaterCreate(12, AppSearchDialogComponent_For_13_Template, 5, 5, \"a\", 10, _forTrack1);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.searchText);\n            i0.ɵɵadvance(8);\n            i0.ɵɵrepeater(ctx.navItemsData);\n          }\n        },\n        dependencies: [RouterModule, i5.RouterLink, MaterialModule, i13.MatFormField, i14.MatInput, i15.MatDivider, i10.MatIconButton, i2.MatDialogClose, i2.MatDialogContent, TablerIconsModule, i7.TablerIconComponent, FormsModule, i16.DefaultValueAccessor, i16.NgControlStatus, i16.NgModel],\n        encapsulation: 2\n      });\n    }\n  }\n  return AppSearchDialogComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}