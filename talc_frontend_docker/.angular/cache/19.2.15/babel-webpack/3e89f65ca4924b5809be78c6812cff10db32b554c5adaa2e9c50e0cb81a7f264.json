{"ast":null,"code":"import { AppFullcalendarComponent } from './calendario-modernize/fullcalendar.component';\nimport { MatNativeDateModule } from '@angular/material/core';\nimport { CalendarModule } from 'angular-calendar';\nimport { FormsModule } from '@angular/forms';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatCardModule } from '@angular/material/card';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/turnos.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/material/form-field\";\nimport * as i4 from \"@angular/material/input\";\nimport * as i5 from \"@angular/material/icon\";\nimport * as i6 from \"@angular/material/card\";\nexport let CalendarioComponent = /*#__PURE__*/(() => {\n  class CalendarioComponent {\n    constructor(turnosService) {\n      this.turnosService = turnosService;\n      this.eventos = [];\n      this.eventosFiltrados = [];\n      this.searchTerm = '';\n    }\n    ngOnInit() {\n      this.turnosService.obtenerTurnos().subscribe(turnos => {\n        this.eventos = turnos.map(turno => this.turnoToEvent(turno));\n        this.filtrarEventos();\n      });\n    }\n    filtrarEventos() {\n      const filtro = this.normalizarTexto(this.searchTerm);\n      if (!filtro) {\n        this.eventosFiltrados = this.eventos;\n        return;\n      }\n      this.eventosFiltrados = this.eventos.filter(ev => {\n        const paciente = this.normalizarTexto(ev.meta?.Paciente || '');\n        return paciente.includes(filtro);\n      });\n    }\n    normalizarTexto(texto) {\n      return texto.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '') // Quita tildes\n      .replace(/\\s+/g, ' ').trim();\n    }\n    turnoToEvent(turno) {\n      const start = new Date(`${turno.Fecha}T${turno.Hora}`);\n      const end = new Date(start);\n      end.setHours(end.getHours() + 1); // Asume duración 1 hora\n      const hora = turno.Hora.slice(0, 5); // Formato HH:MM\n      return {\n        start,\n        end,\n        title: `${hora} | ${turno.Paciente}<br>[${turno.Especialidad}] ${turno.Profesional}`,\n        color: {\n          primary: '#aa262b',\n          secondary: '#f8d7da'\n        },\n        meta: turno\n      };\n    }\n    static {\n      this.ɵfac = function CalendarioComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || CalendarioComponent)(i0.ɵɵdirectiveInject(i1.TurnosService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CalendarioComponent,\n        selectors: [[\"app-calendario\"]],\n        decls: 21,\n        vars: 2,\n        consts: [[1, \"calendario-container\"], [1, \"header-section\"], [1, \"header-content\"], [1, \"title-section\"], [1, \"page-title\"], [1, \"title-icon\"], [1, \"page-subtitle\"], [1, \"search-card\"], [1, \"search-section\", \"search-section-flex-between\"], [1, \"search-filters-row\"], [\"appearance\", \"outline\", 1, \"search-field\"], [\"matInput\", \"\", \"placeholder\", \"Buscar por paciente...\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [\"matSuffix\", \"\"], [1, \"calendar-card\"], [3, \"eventsInput\"]],\n        template: function CalendarioComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h1\", 4)(5, \"mat-icon\", 5);\n            i0.ɵɵtext(6, \"event\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(7, \" Calendario de Turnos \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"p\", 6);\n            i0.ɵɵtext(9, \"Administra los turnos y citas de tus pacientes\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(10, \"mat-card\", 7)(11, \"div\", 8)(12, \"div\", 9)(13, \"mat-form-field\", 10)(14, \"mat-label\");\n            i0.ɵɵtext(15, \"Buscar paciente\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"input\", 11);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function CalendarioComponent_Template_input_ngModelChange_16_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.searchTerm, $event) || (ctx.searchTerm = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"input\", function CalendarioComponent_Template_input_input_16_listener() {\n              return ctx.filtrarEventos();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"mat-icon\", 12);\n            i0.ɵɵtext(18, \"search\");\n            i0.ɵɵelementEnd()()()()();\n            i0.ɵɵelementStart(19, \"div\", 13);\n            i0.ɵɵelement(20, \"app-fullcalendar\", 14);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(16);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.searchTerm);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"eventsInput\", ctx.eventosFiltrados);\n          }\n        },\n        dependencies: [CalendarModule, AppFullcalendarComponent, MatNativeDateModule, FormsModule, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, MatFormFieldModule, i3.MatFormField, i3.MatLabel, i3.MatSuffix, MatInputModule, i4.MatInput, MatIconModule, i5.MatIcon, MatCardModule, i6.MatCard],\n        styles: [\".container-fluid[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:2rem}.card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 8px #aa262b0a;margin-top:.5rem}.card-body[_ngcontent-%COMP%]{padding:1.2rem}.calendario-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.search-card[_ngcontent-%COMP%]{margin-bottom:24px;border-radius:12px;box-shadow:0 4px 12px #0000000d}.search-card[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{padding:16px}.search-card[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-section-flex-between[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;padding-top:24px;padding-bottom:24px}.search-card[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-filters-row[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:flex-start;gap:24px}.search-card[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:1;min-width:220px;max-width:400px}.calendar-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 8px #aa262b0a;background:#fff;padding:1.2rem}.header-section[_ngcontent-%COMP%]{margin-bottom:24px}.header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px}.header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0 0 8px;font-size:28px;font-weight:600;color:#333}.header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{color:#aa262b;font-size:32px}.header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{margin:0;color:#666;font-size:16px}\"]\n      });\n    }\n  }\n  return CalendarioComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}