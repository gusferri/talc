<!--
  Template del componente de diálogo de cambio de contraseña
  Este archivo define la interfaz de usuario para el modal de cambio
  de contraseña obligatorio del sistema TALC.

  Características principales:
  - Formulario de cambio de contraseña con validaciones
  - Campos para contraseña actual, nueva y confirmación
  - Botones de visibilidad para mostrar/ocultar contraseñas
  - Validaciones de campos requeridos
  - Botones de acción (actualizar/cancelar)
  - Integración con Material Design
  - Accesibilidad con aria-labels
  - Iconos descriptivos para mejor UX
-->

<!-- Contenedor principal del diálogo -->
<div class="dialog-container">
  
  <!-- Título del diálogo con icono -->
  <h2 mat-dialog-title class="dialog-title">
    <mat-icon>lock_reset</mat-icon>
    Cambiar Contraseña
  </h2>

  <!-- Formulario de cambio de contraseña -->
  <form (ngSubmit)="guardar()" class="password-form">
    
    <!-- Campo de contraseña actual -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Contraseña Actual</mat-label>
      <input matInput 
             [type]="hideCurrentPassword ? 'password' : 'text'"
             [(ngModel)]="currentPassword" 
             name="currentPassword" 
             required 
             placeholder="Ingrese su contraseña actual">
      <!-- Botón para mostrar/ocultar contraseña actual -->
      <button mat-icon-button 
              matSuffix 
              (click)="hideCurrentPassword = !hideCurrentPassword" 
              [attr.aria-label]="'Hide password'" 
              [attr.aria-pressed]="hideCurrentPassword">
        <mat-icon>{{hideCurrentPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
      </button>
    </mat-form-field>

    <!-- Campo de nueva contraseña -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Nueva Contraseña</mat-label>
      <input matInput 
             [type]="hideNewPassword ? 'password' : 'text'"
             [(ngModel)]="newPassword" 
             name="newPassword" 
             required 
             placeholder="Ingrese su nueva contraseña">
      <!-- Botón para mostrar/ocultar nueva contraseña -->
      <button mat-icon-button 
              matSuffix 
              (click)="hideNewPassword = !hideNewPassword" 
              [attr.aria-label]="'Hide password'" 
              [attr.aria-pressed]="hideNewPassword">
        <mat-icon>{{hideNewPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
      </button>
    </mat-form-field>

    <!-- Campo de confirmación de nueva contraseña -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Confirmar Nueva Contraseña</mat-label>
      <input matInput 
             [type]="hideConfirmPassword ? 'password' : 'text'"
             [(ngModel)]="confirmPassword" 
             name="confirmPassword" 
             required 
             placeholder="Confirme su nueva contraseña">
      <!-- Botón para mostrar/ocultar confirmación de contraseña -->
      <button mat-icon-button 
              matSuffix 
              (click)="hideConfirmPassword = !hideConfirmPassword" 
              [attr.aria-label]="'Hide password'" 
              [attr.aria-pressed]="hideConfirmPassword">
        <mat-icon>{{hideConfirmPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
      </button>
    </mat-form-field>

    <!-- Sección de acciones del diálogo -->
    <div mat-dialog-actions class="dialog-actions">
      <!-- Botón para actualizar contraseña -->
      <button mat-raised-button 
              color="primary" 
              type="submit" 
              class="action-button update-button">
        <mat-icon>update</mat-icon>
        Actualizar
      </button>
      <!-- Botón para cancelar el cambio -->
      <button mat-raised-button 
              color="warn" 
              type="button" 
              (click)="cancelar()" 
              class="action-button cancel-button">
        <mat-icon>cancel</mat-icon>
        Cancelar
      </button>
    </div>
  </form>
</div> 